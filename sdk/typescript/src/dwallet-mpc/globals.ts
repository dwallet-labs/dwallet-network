// Copyright (c) dWallet Labs, Inc.
// SPDX-License-Identifier: BSD-3-Clause-Clear
import { Buffer } from 'buffer';
import type { SuiClient } from '@mysten/sui/client';
import type { Ed25519Keypair } from '@mysten/sui/keypairs/ed25519';

export const DWALLET_ECDSA_K1_MOVE_MODULE_NAME = 'dwallet_2pc_mpc_secp256k1';
export const DWALLET_ECDSA_K1_INNER_MOVE_MODULE_NAME = 'dwallet_2pc_mpc_secp256k1_inner';
export const DWALLET_NETWORK_VERSION = 0;

export const SUI_PACKAGE_ID = '0x2';
export const checkpointCreationTime = 2000;

interface IkaConfig {
	ika_package_id: string;
	ika_system_package_id: string;
	ika_system_obj_id: string;
}

export interface Config {
	suiClientKeypair: Ed25519Keypair;
	encryptedSecretShareSigningKeypair: Ed25519Keypair;
	client: SuiClient;
	timeout: number;
	ikaConfig: IkaConfig;
	dWalletSeed: Uint8Array;
}

export enum MPCKeyScheme {
	Secp256k1 = 1,
	Ristretto = 2,
}

/**
 * Utility function to create a delay.
 */
export function delay(ms: number) {
	return new Promise((resolve) => setTimeout(resolve, ms));
}

export interface Presign {
	id: { id: string };
	dwallet_id: string;
	presign: Uint8Array;
}

export function isPresign(obj: any): obj is Presign {
	return obj?.id !== undefined && obj?.dwallet_id !== undefined && obj?.presign !== undefined;
}

export async function getObjectWithType<TObject>(
	conf: Config,
	objectID: string,
	isObject: (obj: any) => obj is TObject,
): Promise<TObject> {
	const obj = await conf.client.getObject({
		id: objectID,
		options: { showContent: true },
	});
	if (!isMoveObject(obj.data?.content)) {
		throw new Error('Invalid object');
	}
	const objContent = obj.data?.content.fields;
	if (!isObject(objContent)) {
		throw new Error('Invalid object fields');
	}
	return objContent;
}

// Mocked network DKG output used for testing purposes in non-production environments.
export const mockedNetworkDecryptionKeyPublicOutput = Uint8Array.from(
	Buffer.from(
		'hASAAs5wqNstH1HAqDAoEA97wQWK+CnQQW96IJKxesFlQLcTZY/y8wM51ngwhSS7xIk9Uvm/d3IzlGA7DpdYANQ4n5n1MhYqimtB8in86kO/6TuMKy/98djTm2nmX+6I8BfGLftpjSbFol1VCy6m4WMlyusOV0h4AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAg2UBd5VK+oCImzPMGVchSncNDikUneX7UTqqkiAULphXsqEt3ZqBTYahAlRTfD1/OdvxPx3CWbFnADIN0+b473Hgt9ZNc321flZWID2W0UflWT6OYDO78F/o6atFeosInbceYonvQaXdVzbvecBBhOO0xfPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADkeQMABACAAs6osOlPOLcAKPeTjI07c36x2MK+JMjrar/RA3+opBR3NGj3n6q0BoJsbKfgvxDzd1qaIcyqmD/KeH2aXoFFF2WiOZD7ICuydTjkuhTCMZsYo5vFKwYN6bipIgMfr0VPadDVMqIA8xnLyigK8oNY/P8hCBaCAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAk2bqZdWozPWH14l6IbXBn13GIo4IbvQwVbqRK1DdKqDwIKf7EXnrf0TLTarZ5A9jJppS6Aiq1XS2zmlebFXgzDfYD5orHc95jSAnAl6/GYnM9KUf4yT5jrG+xRBwt5uNLW5unTk6ZzV0k8kVE9eGYd1Q/frAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAQCAAkuKDhUlgmcvQPsp4eSiRrF+/KXwg0yMaVIalnyHoW3eOt2okz/PmVzONt1KkDGv2oj84bdxA4oNwBGRtvck4Yz2Fe8NLl2EDCZqKoM/IUdJ+18oSsT827fdNGVmok8gnDRrzI0VozOoHa0mzGuUvO5ufp6JAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAkvN6lioRWJubrgM0EX9unh/XL8hQx7Ttpgaj0OotzZ10aHKzcY6jggVw2KHCDxlvhj4uRqLXeBXmAaT6cbS+jR1mgHuw8vWnP/8kBDcBWdkPRe7p8JXBH1A5VxQ8W62Huy1H1U+0kGymlJ0Ze/iuijdpfr6//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8CAIACPN9r8yGGIszh05ZrIRyktxM+rDyScmO/mixZ0BW/kaTwYyaequnqfh8jW/kNqSEx70HSFxn9E17HtK5kxrGOJAo7jrTcCg7NZPPIRq5taizeH4ZpwDlIgp0eEegBm84+KZ+oKLoDxR7o5Rp6DeUMYSU/ZjkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIACvVmNgJRD7ruhrlja4z4zUsNxwEHqlxNpyz4wMUPTiSTz8hM17KZBn3esyKNzTJn+RmBCFJp3fslHcLtHs4yqgmaiensVSkVsgOF3aq9R787hbadH60AywMOI6kwfkwT7wFM1ZhQbUKCBHJIxbvagN+GCGBoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAgAJCTzEgMGWoQUNdkgHJSpDhDBv4NjxPfMDchcPAtU8Dd7vK3KghoghZXLp4cFcF4Nt+GdwWNWRuymzwYFO7OEz5A/YZBSGtRf/x5PA4Sk+ApJGTs5t5cZQZtTVkmXh44Pc+BgjLufcwlrTx1xmiJ7jUazD0TQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAJJ9I3X6hDOSaT/Z1XGGVhhgzzpNSRMyV5/j01PMpa/bIvHtcg9d70UELGOM1R1YoVwfWZFzqeLnAQWaBy3XIduZtNdmgxzhs8o/Q0OWZq/1eXfOngfODOcV1sqP6v1fsTaWwO2FP5oKRNNMDL0HEgCGwejUQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABACAAlTQ0D1HPlzENa/Nc4d6OMyxTpF47qs2BUHxLCktxvq2ctXWcqoHunmcrpNM65GdTfVPdnbpkcXC9TOi/QSxEiFemCbeIlrN3DKiX6feHuC/du52oGX75SaxxnXgxGJv451gEe5ttRM4y/5Ne70BeuSglxB0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAo2fUhK/pdsekofBxEN1/wUIPox3lM3h7wJw9q6WIS0UpmPlJMVY7k3VAGgP12gpkUhHWxGxXem/abbZlJSBgnbvMYcnaSY7PoAQN4zXDxiZWuKblNThzWj28OiBa3u6W9+XbWgBOVfYhqfA4P0ZoLd4Gf/K//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8EAQCACAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAIAIBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAgAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABACACAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgEOI8FbeJGAJJzn/lLc8jhSW0l9BeQnsJ7SW0l9BewlGACBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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//8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEABgAA6wIAAGwEAACAAonSHaQHw7+qQR8dFyA1X5JN+d4Yx0HlyYrzpbdugKCc4GlMI/iEB2t95JulvM0XgcG/S2W1wEgo4kvUHZVJvyc8J9CtmphZCkSUnm/J4SM9Y9UC/2avePLPhn6EwdDERgXQf12/YcRUSONaNWkrJTJf30YIkophcapYs+YmSUoJn9LyCaaU9lxayrQj63/UDHiJJ7mWT575nU3ZOVueqRBkEozajUUCgpBNf3KcrA6ImjHSDFvKF4oFUBi9zSF6zXudfb4hmRLocjhJrynn6uF+pdRx04tMt1os5vJpRxvKbE2NjOtg+Any//////////////////////////////8CAAAAAAAAAMABCSzxVVYPeHKsSDHG05sSENPEJ9VTqdpeNoLEb8SPBZ+jweRKvnXLJpWH12gyquRaXTL/5TUdgtP5UxNBandiqalhzgLOdcjfPaH48se1KmmY6Ljo/MZ0AGcp9XQNx77r61v7lpjdwN/bdD5JUXvDeN4YBIRorHLYnuYO8VjQEwaTBujYpekJ9y0KaZttgZGVnL8A6Q2twzs3LObyaUcbymxNjYzrYPgJ8v//////////////////////////////gAKJ0h2kB8O/qkEfHRcgNV+STfneGMdB5cmK86W3boCgnOBpTCP4hAdrfeSbpbzNF4HBv0tltcBIKOJL1B2VSb8nPCfQrZqYWQpElJ5vyeEjPWPVAv9mr3jyz4Z+hMHQxEYF0H9dv2HEVEjjWjVpKyUyX99GCJKKYXGqWLPmJklKCZ/S8gmmlPZcWsq0I+t/1Ax4iSe5lk+e+Z1N2TlbnqkQZBKM2o1FAoKQTX9ynKwOiJox0gxbyheKBVAYvc0hes17nX2+IZkS6HI4Sa8p5+rhfqXUcdOLTLdaLObyaUcbymxNjYzrYPgJ8v//////////////////////////////IEFBNtCMXtK/O6BIr+bcrrr+////////////////////wAE3D5RH/7X2VuBorw1pTIJrnJ2wdTFkq8Iv+mr/iUlKDuHxCJkMN83retHU8/F7wrIQqpX0zUxzfrnGbPUqmtPRH0tjTYX/dxiMGXvIflQUxxItmXYJGghI1UA+kqpGFhJs1WwF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QbKaUnRl7+K6KN2l+vr//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wIAgAI832vzIYYizOHTlmshHKS3Ez6sPJJyY7+aLFnQFb+RpPBjJp6q6ep+HyNb+Q2pITHvQdIXGf0TXse0rmTGsY4kCjuOtNwKDs1k88hGrm1qLN4fhmnAOUiCnR4R6AGbzj4pn6gougPFHujlGnoN5QxhJT9mOQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAK9WY2AlEPuu6GuWNrjPjNSw3HAQeqXE2nLPjAxQ9OJJPPyEzXspkGfd6zIo3NMmf5GYEIUmnd+yUdwu0ezjKqCZqJ6exVKRWyA4Xdqr1HvzuFtp0frQDLAw4jqTB+TBPvAUzVmFBtQoIEckjFu9qA34YIYGgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwCAAkJPMSAwZahBQ12SAclKkOEMG/g2PE98wNyFw8C1TwN3u8rcqCGiCFlcunhwVwXg234Z3BY1ZG7KbPBgU7s4TPkD9hkFIa1F//Hk8DhKT4CkkZOzm3lxlBm1NWSZeHjg9z4GCMu59zCWtPHXGaInuNRrMPRNAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAkn0jdfqEM5JpP9nVcYZWGGDPOk1JEzJXn+PTU8ylr9si8e1yD13vRQQsY4zVHVihXB9ZkXOp4ucBBZoHLdch25m012aDHOGzyj9DQ5Zmr/V5d86eB84M5xXWyo/q/V+xNpbA7YU/mgpE00wMvQcSAIbB6NRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAIACVNDQPUc+XMQ1r81zh3o4zLFOkXjuqzYFQfEsKS3G+rZy1dZyqge6eZyuk0zrkZ1N9U92dumRxcL1M6L9BLESIV6YJt4iWs3cMqJfp94e4L927nagZfvlJrHGdeDEYm/jnWAR7m21EzjL/k17vQF65KCXEHQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIACjZ9SEr+l2x6Sh8HEQ3X/BQg+jHeUzeHvAnD2rpYhLRSmY+UkxVjuTdUAaA/XaCmRSEdbEbFd6b9pttmUlIGCdu8xhydpJjs+gBA3jNcPGJla4puU1OHNaPbw6IFre7pb35dtaAE5V9iGp8Dg/Rmgt3gZ/8r//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////w==',
		'base64',
	),
);

/**
 * Represents the Move `SystemInnerV1` struct.
 */
interface IKASystemStateInner {
	fields: {
		value: {
			fields: {
				dwallet_2pc_mpc_secp256k1_id: string;
				dwallet_2pc_mpc_secp256k1_network_decryption_keys: Array<any>;
			};
		};
	};
}

interface DWalletNetworkDecryptionKey {
	fields: {
		id: { id: string };
		public_output: Uint8Array;
	};
}

/**
 * Represents a Move shared object owner.
 */
interface SharedObjectOwner {
	Shared: {
		// The object version when it became shared.
		initial_shared_version: number;
	};
}

/**
 * Represents a Move Address object owner.
 */
interface AddressObjectOwner {
	AddressOwner: string;
}

interface MoveObject {
	fields: any;
}

interface MoveDynamicField {
	fields: {
		name: string;
		value: Uint8Array;
	};
}

export interface SharedObjectData {
	object_id: string;
	initial_shared_version: number;
}

export function isAddressObjectOwner(obj: any): obj is AddressObjectOwner {
	return obj?.AddressOwner !== undefined;
}

export function isMoveObject(obj: any): obj is MoveObject {
	return obj?.fields !== undefined;
}

export function isMoveDynamicField(obj: any): obj is MoveDynamicField {
	return obj?.fields.name !== undefined || obj?.fields.value !== undefined;
}

export function getEncryptionKeyMoveType(ikaSystemPackageID: string): string {
	return `${ikaSystemPackageID}::${DWALLET_ECDSA_K1_INNER_MOVE_MODULE_NAME}::EncryptionKey`;
}

export function isIKASystemStateInner(obj: any): obj is IKASystemStateInner {
	return (
		obj?.fields?.value?.fields?.dwallet_2pc_mpc_secp256k1_network_decryption_keys !== undefined &&
		obj?.fields?.value?.fields?.dwallet_2pc_mpc_secp256k1_id !== undefined
	);
}

export function isDWalletNetworkDecryptionKey(obj: any): obj is DWalletNetworkDecryptionKey {
	return obj?.fields?.public_output !== undefined;
}

export async function getDwalletSecp256k1ObjID(c: Config): Promise<string> {
	const dynamicFields = await c.client.getDynamicFields({
		parentId: c.ikaConfig.ika_system_obj_id,
	});
	const innerSystemState = await c.client.getDynamicFieldObject({
		parentId: c.ikaConfig.ika_system_obj_id,
		name: dynamicFields.data[DWALLET_NETWORK_VERSION].name,
	});
	if (!isIKASystemStateInner(innerSystemState.data?.content)) {
		throw new Error('Invalid inner system state');
	}
	return innerSystemState.data?.content?.fields.value.fields.dwallet_2pc_mpc_secp256k1_id;
}

export function isSharedObjectOwner(obj: any): obj is SharedObjectOwner {
	return obj?.Shared?.initial_shared_version !== undefined;
}

export async function getInitialSharedVersion(c: Config, objectID: string): Promise<number> {
	const obj = await c.client.getObject({
		id: objectID,
		options: {
			showOwner: true,
		},
	});
	const owner = obj.data?.owner;
	if (!owner || !isSharedObjectOwner(owner)) {
		throw new Error('Object is not shared');
	}
	return owner.Shared?.initial_shared_version;
}

export async function getDWalletSecpState(c: Config): Promise<SharedObjectData> {
	const dwalletSecp256k1ObjID = await getDwalletSecp256k1ObjID(c);
	const initialSharedVersion = await getInitialSharedVersion(c, dwalletSecp256k1ObjID);
	return {
		object_id: dwalletSecp256k1ObjID,
		initial_shared_version: initialSharedVersion,
	};
}

export async function fetchObjectWithType<TObject>(
	conf: Config,
	objectType: string,
	isObject: (obj: any) => obj is TObject,
	objectId: string,
) {
	const res = await conf.client.getObject({
		id: objectId,
		options: { showContent: true },
	});

	const objectData =
		res.data?.content?.dataType === 'moveObject' &&
		res.data?.content.type === objectType &&
		isObject(res.data.content.fields)
			? (res.data.content.fields as TObject)
			: null;

	if (!objectData) {
		throw new Error(
			`invalid object of type ${objectType}, got: ${JSON.stringify(res.data?.content)}`,
		);
	}

	return objectData;
}

interface StartSessionEvent {
	session_id: string;
}

export function isStartSessionEvent(event: any): event is StartSessionEvent {
	return event.session_id !== undefined;
}

export async function fetchCompletedEvent<TEvent extends { session_id: string }>(
	c: Config,
	sessionID: string,
	isEventFn: (parsedJson: any) => parsedJson is TEvent,
	eventType: string = '',
): Promise<TEvent> {
	const startTime = Date.now();

	while (Date.now() - startTime <= c.timeout) {
		// Wait for a bit before polling again, objects might not be available immediately.
		const interval = 500;
		await delay(interval);

		const { data } = await c.client.queryEvents({
			query: {
				TimeRange: {
					startTime: (Date.now() - interval * 4).toString(),
					endTime: Date.now().toString(),
				},
			},
			limit: 1000,
		});

		const match = data.find(
			(event) =>
				(event.type === eventType || !eventType) &&
				isEventFn(event.parsedJson) &&
				event.parsedJson.session_id === sessionID,
		);

		if (match) return match.parsedJson as TEvent;
	}

	const seconds = ((Date.now() - startTime) / 1000).toFixed(2);
	throw new Error(
		`timeout: unable to fetch an event of type ${eventType} within ${
			c.timeout / (60 * 1000)
		} minutes (${seconds} seconds passed).`,
	);
}

export interface DWalletCap {
	dwallet_id: string;
}

export function isDWalletCap(obj: any): obj is DWalletCap {
	return !!obj?.dwallet_id;
}

interface ActiveDWallet {
	state: {
		fields: {
			public_output: Uint8Array;
		};
	};
}

export function isActiveDWallet(obj: any): obj is ActiveDWallet {
	return obj?.state?.fields?.public_output !== undefined;
}

export async function getNetworkDecryptionKeyPublicOutputID(
	c: Config,
	networkDecryptionKeyId?: string | null,
): Promise<string> {
	networkDecryptionKeyId = networkDecryptionKeyId ?? (await getNetworkDecryptionKeyID(c));
	const networkDecryptionKey = await c.client.getObject({
		id: networkDecryptionKeyId,
		options: { showContent: true },
	});

	if (
		!networkDecryptionKey ||
		!isMoveObject(networkDecryptionKey?.data?.content) ||
		!isDWalletNetworkDecryptionKey(networkDecryptionKey.data.content) ||
		!isMoveObject(networkDecryptionKey.data.content.fields.public_output)
	) {
		throw new Error(`invalid network decryption key object: ${networkDecryptionKeyId}`);
	}
	return networkDecryptionKey.data.content.fields.public_output.fields.contents.fields.id?.id;
}

async function readTableVecAsRawBytes(c: Config, table_id: string): Promise<Uint8Array> {
	const dynamicFieldPage = await c.client.getDynamicFields({ parentId: table_id });

	if (!dynamicFieldPage?.data?.length) {
		throw new Error('no dynamic fields found');
	}

	const data: Uint8Array[] = [];
	for (const tableRowResult of dynamicFieldPage.data) {
		const id = tableRowResult.objectId;

		const dynField = await c.client.getObject({
			id: id,
			options: { showContent: true },
		});
		if (!isMoveObject(dynField.data?.content) || !isMoveDynamicField(dynField.data?.content)) {
			throw new Error('invalid dynamic field object');
		}
		const tableIndex = parseInt(dynField.data.content.fields.name);
		data[tableIndex] = dynField.data.content.fields.value;
	}
	return new Uint8Array(data.flatMap((arr) => Array.from(arr)));
}

export async function getNetworkDecryptionKeyPublicOutput(c: Config): Promise<Uint8Array> {
	const networkDecryptionKeyPublicOutputID = await getNetworkDecryptionKeyPublicOutputID(c, null);
	return await readTableVecAsRawBytes(c, networkDecryptionKeyPublicOutputID);
}

export async function getNetworkDecryptionKeyID(c: Config): Promise<string> {
	const dynamicFields = await c.client.getDynamicFields({
		parentId: c.ikaConfig.ika_system_obj_id,
	});
	const innerSystemState = await c.client.getDynamicFieldObject({
		parentId: c.ikaConfig.ika_system_obj_id,
		name: dynamicFields.data[DWALLET_NETWORK_VERSION].name,
	});
	if (!isIKASystemStateInner(innerSystemState.data?.content)) {
		throw new Error('Invalid inner system state');
	}

	const network_decryption_keys =
		innerSystemState.data.content.fields.value.fields
			.dwallet_2pc_mpc_secp256k1_network_decryption_keys;
	return network_decryption_keys[network_decryption_keys.length - 1]?.fields
		?.dwallet_network_decryption_key_id;
}

export interface DWallet {
	dwalletID: string;
	dwallet_cap_id: string;
	secret_share: Uint8Array;
	output: Uint8Array;
	encrypted_secret_share_id: string;
}

export interface EncryptedDWalletData {
	dwallet_id: string;
	encrypted_user_secret_key_share_id: string;
}
